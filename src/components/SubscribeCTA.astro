---
// Soft gate signup CTA - no actual gating
---

<div
  class="bg-gradient-to-br from-brand-900/30 to-[#0f1f3a]/50 border border-brand/30 rounded-2xl p-8 my-12">
  <div class="max-w-2xl mx-auto text-center">
    <h2 class="text-2xl font-bold text-white mb-3">
      Get More Industry Insights
    </h2>
    <p class="text-slate-300 mb-6">
      Subscribe to receive exclusive reports, analysis, and updates delivered
      directly to your inbox.
    </p>

    <form
      class="max-w-lg mx-auto space-y-3"
      action="/api/subscribe"
      method="POST"
      id="subscribe-form">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
        <input
          type="text"
          name="fName"
          placeholder="Enter your first name"
          required
          class="w-full px-4 py-3 bg-[#0a1628] border border-white/10 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"
        />
        <input
          type="text"
          name="lName"
          placeholder="Enter your last name"
          required
          class="w-full px-4 py-3 bg-[#0a1628] border border-white/10 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"
        />
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-[minmax(0,1fr)_auto] gap-3">
        <input
          type="email"
          name="email"
          placeholder="Enter your email"
          required
          class="w-full px-4 py-3 bg-[#0a1628] border border-white/10 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"
        />
        <button
          type="submit"
          class="flex items-center justify-center gap-1 w-full sm:w-auto px-6 py-3 bg-brand hover:bg-brand-600 text-black font-semibold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-brand-400 focus:ring-offset-2 focus:ring-offset-[#0a1628]">
          Subscribe
          <svg
            aria-hidden="true"
            class="h-3 w-3"
            viewBox="0 0 20 20"
            fill="currentColor">
            <path
              fill-rule="evenodd"
              d="M3 10a1 1 0 0 1 1-1h9.586l-3.293-3.293a1 1 0 1 1 1.414-1.414l5 5a1 1 0 0 1 0 1.414l-5 5a1 1 0 0 1-1.414-1.414L13.586 11H4a1 1 0 0 1-1-1Z"
              clip-rule="evenodd"></path>
          </svg>
        </button>
      </div>
    </form>

    <p class="text-xs text-slate-500 mt-4">
      We respect your privacy. Unsubscribe at any time.
    </p>
  </div>
</div>

<script>
  document
    .getElementById("subscribe-form")
    ?.addEventListener("submit", async (e) => {
      e.preventDefault();
      const form = e.target as HTMLFormElement;
      const formData = new FormData(form);

      try {
        const response = await fetch(form.action, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            email: formData.get("email"),
            fName: formData.get("fName"),
            lName: formData.get("lName"),
          }),
        });

        const result = await response.json();

        if (response.ok) {
          alert(result.message || "Thank you for subscribing!");
          form.reset();
        } else {
          alert(result.message || "Subscription failed. Please try again.");
        }
      } catch (error) {
        console.error("Subscription error:", error);
        alert("An error occurred. Please try again.");
      }
    });
</script>
